{"version":3,"sources":["redux/actions/users.js","components/WeChat.js","assets/img/infoCard.jpg","assets/img/login.jpg","pages/Login.js","redux/actions/auth.js"],"names":["getUsers","dispatch","payload","type","GET_USERS","updateUser","a","fetch","method","headers","body","JSON","stringify","UPDATE_USER","updateAuth","console","error","message","WeChat","useState","isModalOpen","setIsModalOpen","className","block","layout","onClick","aria-hidden","backdrop","isOpen","onClose","alt","src","infoCard","module","exports","Login","useDispatch","users","useSelector","state","name","setName","password","setPassword","validUser","setValidU","validPass","setValidP","useEffect","response","json","log","fetchUsers","ImageJS","valid","onChange","e","target","value","defaultValue","hidden","tag","Link","to","user","loadSuccess","preventDefault","loadFail","login","href","LOGIN_SUCCESS","LOGIN_FAIL","UPDATE_AUTH"],"mappings":"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","file":"static/js/10.6821895e.chunk.js","sourcesContent":["import { CREATE_USER, GET_USERS, UPDATE_USER } from './types'\nimport { updateAuth } from './auth'\n\n\nexport const addUser = (dispatch, payload) => {\n    dispatch({ type: CREATE_USER, payload })\n}\n\nexport const getUsers = (dispatch, payload) => {\n    dispatch({ type: GET_USERS, payload })\n}\n\nexport const updateUser = async (dispatch, payload) => {\n    try {\n        const response = await fetch(\"http://localhost:5000/users\", {\n            method: 'PUT',\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(payload)\n        })\n        dispatch({ type: UPDATE_USER, payload })\n        updateAuth(dispatch, payload);\n    } catch (error) {\n        console.error(error.message);\n    }\n\n}","import React, { useState } from 'react'\nimport infoCard from '../assets/img/infoCard.jpg'\nimport { WeixinIcon } from '../icons'\nimport { Modal, ModalBody, Button } from '@windmill/react-ui'\n\nfunction WeChat() {\n  const [isModalOpen, setIsModalOpen] = useState(false)\n\n  function openModal() {\n    setIsModalOpen(true)\n  }\n\n  function closeModal() {\n    setIsModalOpen(false)\n  }\n\n  return (\n    <>\n      <Button className=\"mt-4\" block layout=\"outline\" onClick={() => openModal()}>\n        <WeixinIcon className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\n            Wechat\n        </Button>\n      <Modal backdrop='static' isOpen={isModalOpen} onClose={closeModal}>\n        <ModalBody>\n          <div className=\"w-100\">\n            <img alt=\"panda\" className=\" size w-full h-full\" src={infoCard} />\n          </div>\n        </ModalBody>\n      </Modal>\n    </>\n  )\n}\n\nexport default WeChat\n","module.exports = __webpack_public_path__ + \"static/media/infoCard.81a84b15.jpg\";","module.exports = __webpack_public_path__ + \"static/media/login.2731bf4a.jpg\";","import React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport ImageJS from '../assets/img/login.jpg'\nimport { GithubIcon } from '../icons'\nimport { Label, Input, Button, HelperText } from '@windmill/react-ui'\nimport { loadSuccess, loadFail } from '../redux/actions/auth'\nimport { getUsers } from '../redux/actions/users'\nimport WeChat from '../components/WeChat'\n\nfunction Login() {\n  const dispatch = useDispatch();\n  const users = useSelector(state => state.users);\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [validUser, setValidU] = useState(true);\n  const [validPass, setValidP] = useState(true);\n\n\n  const login = e => {\n    for (let user of users) {\n      if (name === user.name) {\n        setValidU(true);\n        if (password === user.password) {\n          loadSuccess(dispatch, user);\n          return;\n        }\n        else {\n          e.preventDefault();\n          setValidP(false);\n          return;\n        }\n      }\n\n    }\n    e.preventDefault();\n    loadFail(dispatch)\n    setValidU(false);\n  }\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch(\"http://localhost:5000/users\");\n        const users = await response.json();\n        getUsers(dispatch, users);\n      } catch (error) {\n        getUsers(dispatch, [])\n        console.log(error.message)\n      }\n    }\n    fetchUsers();\n\n\n\n  }\n    , []);\n  return (\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n      <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\n        <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n          <div className=\"h-32 md:h-auto md:w-1/2\">\n            <img\n              aria-hidden=\"true\"\n              className=\"object-cover w-full h-full \"\n              src={ImageJS}\n              alt=\"Office\"\n            />\n\n          </div>\n          <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n\n            <div className=\"w-full\">\n              <form>\n                <h1 className=\"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200\">Login</h1>\n                <Label>\n                  <span>User</span>\n                  <Input className=\"mt-1\" type=\"email\" valid={validUser}\n                    onChange={e => setName(e.target.value)}\n                    defaultValue={name} />\n                  <HelperText hidden={!validUser} valid={validUser}>Valid user name.</HelperText>\n                  <HelperText hidden={validUser} valid={validUser}>There is no such user exists.</HelperText>\n                </Label>\n\n                <Label className=\"mt-4\">\n                  <span>Password</span>\n                  <Input hidden={validPass} valid={validPass} className=\"mt-1\"\n                    onChange={e => setPassword(e.target.value)}\n                    type=\"password\" defaultValue={password} />\n                  <HelperText hidden={validPass} valid={validPass}>Wrong password.</HelperText>\n                  <HelperText hidden={!validPass} valid={validPass}>Please set your password carefully.</HelperText>\n                </Label>\n\n                <Button className=\"mt-4\" block tag={Link} to=\"/\"\n                  onClick={e => login(e)}>\n                  Log in\n              </Button>\n              </form>\n              <hr className=\"my-8\" />\n              <a href=\"https://github.com/rocky-raccoon94\">\n                <Button block layout=\"outline\">\n                  <GithubIcon className=\"w-4 h-4 mr-2\" aria-hidden=\"true\" />\n\n                Github\n              </Button>   </a>\n              <WeChat />\n\n              <p className=\"mt-4\">\n                <Link\n                  className=\"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline\"\n                  to=\"/forgot-password\"\n                >\n                  Forget password\n                </Link>\n              </p>\n              <p className=\"mt-4\">\n                <Link\n                  className=\"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline\"\n                  to=\"/create-account\"\n                >\n                  Create a new account\n                </Link>\n              </p>\n\n            </div>\n          </main>\n        </div>\n      </div>\n    </div >\n  )\n}\n\nexport default Login\n","import {\n    LOGIN_FAIL, LOGIN_SUCCESS, UPDATE_AUTH\n} from './types';\n\n//Check token  && load user\n\n\nexport const loadSuccess = (dispatch, user) => {\n    dispatch({ type: LOGIN_SUCCESS, payload: user });\n}\n\nexport const loadFail = (dispatch) => {\n    dispatch({ type: LOGIN_FAIL });\n}\n\nexport const updateAuth = (dispatch, payload) => {\n    dispatch({ type: UPDATE_AUTH, payload });\n}\n"],"sourceRoot":""}